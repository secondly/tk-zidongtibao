<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é€‰æ‹©å™¨æµ‹è¯•å·¥å…·</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-section {
            margin-bottom: 20px;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .test-input {
            width: 100%;
            padding: 8px;
            margin: 5px 0;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-family: monospace;
        }
        .test-button {
            background: #1890ff;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        .test-button:hover {
            background: #40a9ff;
        }
        .result {
            margin-top: 10px;
            padding: 10px;
            border-radius: 4px;
            font-family: monospace;
            white-space: pre-wrap;
        }
        .success {
            background: #f6ffed;
            border: 1px solid #b7eb8f;
            color: #52c41a;
        }
        .error {
            background: #fff2f0;
            border: 1px solid #ffccc7;
            color: #ff4d4f;
        }
        .info {
            background: #e6f7ff;
            border: 1px solid #91d5ff;
            color: #1890ff;
        }
        .selector-list {
            background: #fafafa;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .selector-item {
            margin: 5px 0;
            padding: 5px;
            background: white;
            border-radius: 3px;
            cursor: pointer;
            border: 1px solid #ddd;
        }
        .selector-item:hover {
            background: #e6f7ff;
            border-color: #1890ff;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ” é€‰æ‹©å™¨æµ‹è¯•å·¥å…·</h1>
        <p>è¿™ä¸ªå·¥å…·å¸®åŠ©æ‚¨æµ‹è¯•å’ŒéªŒè¯CSSé€‰æ‹©å™¨ï¼Œç¡®ä¿å·¥ä½œæµèƒ½æ­£ç¡®æ‰¾åˆ°å…ƒç´ ã€‚</p>

        <div class="test-section">
            <h3>ğŸ“‹ å¸¸ç”¨å¤é€‰æ¡†é€‰æ‹©å™¨</h3>
            <div class="selector-list">
                <div class="selector-item" onclick="testSelector('input[type=checkbox]')">
                    input[type=checkbox] - æ‰€æœ‰å¤é€‰æ¡†
                </div>
                <div class="selector-item" onclick="testSelector('input[type=checkbox]:not(:checked)')">
                    input[type=checkbox]:not(:checked) - æœªå‹¾é€‰çš„å¤é€‰æ¡†
                </div>
                <div class="selector-item" onclick="testSelector('input[type=checkbox]:not(:disabled)')">
                    input[type=checkbox]:not(:disabled) - å¯ç”¨çš„å¤é€‰æ¡†
                </div>
                <div class="selector-item" onclick="testSelector('.modal input[type=checkbox]')">
                    .modal input[type=checkbox] - å¼¹çª—ä¸­çš„å¤é€‰æ¡†
                </div>
                <div class="selector-item" onclick="testSelector('[role=dialog] input[type=checkbox]')">
                    [role=dialog] input[type=checkbox] - å¯¹è¯æ¡†ä¸­çš„å¤é€‰æ¡†
                </div>
                <div class="selector-item" onclick="testSelector('table input[type=checkbox]')">
                    table input[type=checkbox] - è¡¨æ ¼ä¸­çš„å¤é€‰æ¡†
                </div>
            </div>
        </div>

        <div class="test-section">
            <h3>ğŸ§ª è‡ªå®šä¹‰é€‰æ‹©å™¨æµ‹è¯•</h3>
            <input type="text" id="customSelector" class="test-input" 
                   placeholder="è¾“å…¥CSSé€‰æ‹©å™¨ï¼Œä¾‹å¦‚: input[type=checkbox]" 
                   value="input[type=checkbox]">
            <button class="test-button" onclick="testCustomSelector()">æµ‹è¯•é€‰æ‹©å™¨</button>
            <button class="test-button" onclick="highlightElements()">é«˜äº®æ˜¾ç¤º</button>
            <button class="test-button" onclick="clearHighlight()">æ¸…é™¤é«˜äº®</button>
        </div>

        <div class="test-section">
            <h3>ğŸ“Š æµ‹è¯•ç»“æœ</h3>
            <div id="testResult" class="result info">ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®å¼€å§‹æµ‹è¯•...</div>
        </div>

        <div class="test-section">
            <h3>ğŸ¯ é¡µé¢å…ƒç´ åˆ†æ</h3>
            <button class="test-button" onclick="analyzeCheckboxes()">åˆ†æé¡µé¢å¤é€‰æ¡†</button>
            <button class="test-button" onclick="analyzeModals()">åˆ†æå¼¹çª—å…ƒç´ </button>
            <button class="test-button" onclick="analyzeButtons()">åˆ†ææŒ‰é’®å…ƒç´ </button>
            <div id="analysisResult" class="result info">ç‚¹å‡»åˆ†ææŒ‰é’®æŸ¥çœ‹é¡µé¢å…ƒç´ ...</div>
        </div>

        <div class="test-section">
            <h3>ğŸ”§ å·¥ä½œæµé…ç½®ç”Ÿæˆ</h3>
            <button class="test-button" onclick="generateConfig()">ç”Ÿæˆå‹¾é€‰é…ç½®</button>
            <div id="configResult" class="result info">ç‚¹å‡»ç”ŸæˆæŒ‰é’®è·å–é…ç½®...</div>
        </div>
    </div>

    <script>
        function testSelector(selector) {
            document.getElementById('customSelector').value = selector;
            testCustomSelector();
        }

        function testCustomSelector() {
            const selector = document.getElementById('customSelector').value;
            const resultDiv = document.getElementById('testResult');
            
            try {
                const elements = document.querySelectorAll(selector);
                
                if (elements.length === 0) {
                    resultDiv.className = 'result error';
                    resultDiv.textContent = `âŒ æœªæ‰¾åˆ°åŒ¹é…çš„å…ƒç´ \né€‰æ‹©å™¨: ${selector}`;
                } else {
                    resultDiv.className = 'result success';
                    let result = `âœ… æ‰¾åˆ° ${elements.length} ä¸ªå…ƒç´ \né€‰æ‹©å™¨: ${selector}\n\nå…ƒç´ è¯¦æƒ…:\n`;
                    
                    elements.forEach((el, index) => {
                        result += `${index + 1}. ${el.tagName.toLowerCase()}`;
                        if (el.id) result += `#${el.id}`;
                        if (el.className) result += `.${el.className.split(' ').join('.')}`;
                        if (el.type) result += ` [type="${el.type}"]`;
                        if (el.checked !== undefined) result += ` [checked=${el.checked}]`;
                        result += '\n';
                    });
                }
            } catch (error) {
                resultDiv.className = 'result error';
                resultDiv.textContent = `âŒ é€‰æ‹©å™¨è¯­æ³•é”™è¯¯\n${error.message}`;
            }
        }

        function highlightElements() {
            clearHighlight();
            const selector = document.getElementById('customSelector').value;
            
            try {
                const elements = document.querySelectorAll(selector);
                elements.forEach(el => {
                    el.style.outline = '3px solid #ff4d4f';
                    el.style.backgroundColor = 'rgba(255, 77, 79, 0.1)';
                });
                
                if (elements.length > 0) {
                    elements[0].scrollIntoView({ behavior: 'smooth', block: 'center' });
                }
            } catch (error) {
                console.error('é«˜äº®å¤±è´¥:', error);
            }
        }

        function clearHighlight() {
            const allElements = document.querySelectorAll('*');
            allElements.forEach(el => {
                el.style.outline = '';
                el.style.backgroundColor = '';
            });
        }

        function analyzeCheckboxes() {
            const checkboxes = document.querySelectorAll('input[type=checkbox]');
            const resultDiv = document.getElementById('analysisResult');
            
            if (checkboxes.length === 0) {
                resultDiv.className = 'result error';
                resultDiv.textContent = 'âŒ é¡µé¢ä¸­æ²¡æœ‰æ‰¾åˆ°å¤é€‰æ¡†å…ƒç´ ';
                return;
            }
            
            resultDiv.className = 'result info';
            let result = `ğŸ“‹ æ‰¾åˆ° ${checkboxes.length} ä¸ªå¤é€‰æ¡†:\n\n`;
            
            checkboxes.forEach((checkbox, index) => {
                result += `${index + 1}. `;
                
                // ç”Ÿæˆé€‰æ‹©å™¨
                let selectors = [];
                if (checkbox.id) selectors.push(`#${checkbox.id}`);
                if (checkbox.name) selectors.push(`[name="${checkbox.name}"]`);
                if (checkbox.className) selectors.push(`.${checkbox.className.split(' ').join('.')}`);
                
                // çˆ¶å…ƒç´ ä¿¡æ¯
                let parent = checkbox.parentElement;
                let parentInfo = '';
                if (parent) {
                    if (parent.className) parentInfo += ` çˆ¶å…ƒç´ : .${parent.className.split(' ').join('.')}`;
                }
                
                result += `${selectors.join(' æˆ– ')} [checked=${checkbox.checked}]${parentInfo}\n`;
            });
            
            result += '\næ¨èé€‰æ‹©å™¨:\n';
            result += 'â€¢ input[type=checkbox] - æ‰€æœ‰å¤é€‰æ¡†\n';
            result += 'â€¢ input[type=checkbox]:not(:checked) - æœªå‹¾é€‰çš„å¤é€‰æ¡†\n';
            
            resultDiv.textContent = result;
        }

        function analyzeModals() {
            const modals = document.querySelectorAll('.modal, [role=dialog], .dialog, .popup, [class*=modal], [class*=dialog]');
            const resultDiv = document.getElementById('analysisResult');
            
            resultDiv.className = 'result info';
            let result = `ğŸªŸ æ‰¾åˆ° ${modals.length} ä¸ªå¼¹çª—/å¯¹è¯æ¡†:\n\n`;
            
            modals.forEach((modal, index) => {
                result += `${index + 1}. `;
                if (modal.id) result += `#${modal.id} `;
                if (modal.className) result += `.${modal.className.split(' ').join('.')} `;
                
                const checkboxes = modal.querySelectorAll('input[type=checkbox]');
                result += `(åŒ…å« ${checkboxes.length} ä¸ªå¤é€‰æ¡†)\n`;
            });
            
            resultDiv.textContent = result;
        }

        function analyzeButtons() {
            const buttons = document.querySelectorAll('button, input[type=button], input[type=submit], [role=button]');
            const resultDiv = document.getElementById('analysisResult');
            
            resultDiv.className = 'result info';
            let result = `ğŸ”˜ æ‰¾åˆ° ${buttons.length} ä¸ªæŒ‰é’®:\n\n`;
            
            buttons.forEach((button, index) => {
                if (index < 10) { // åªæ˜¾ç¤ºå‰10ä¸ª
                    result += `${index + 1}. "${button.textContent.trim() || button.value || 'æ— æ–‡æœ¬'}" `;
                    if (button.id) result += `#${button.id} `;
                    if (button.className) result += `.${button.className.split(' ').join('.')}`;
                    result += '\n';
                }
            });
            
            if (buttons.length > 10) {
                result += `... è¿˜æœ‰ ${buttons.length - 10} ä¸ªæŒ‰é’®\n`;
            }
            
            resultDiv.textContent = result;
        }

        function generateConfig() {
            const checkboxes = document.querySelectorAll('input[type=checkbox]');
            const resultDiv = document.getElementById('configResult');
            
            if (checkboxes.length === 0) {
                resultDiv.className = 'result error';
                resultDiv.textContent = 'âŒ é¡µé¢ä¸­æ²¡æœ‰å¤é€‰æ¡†ï¼Œæ— æ³•ç”Ÿæˆé…ç½®';
                return;
            }
            
            resultDiv.className = 'result success';
            
            const config = {
                "type": "loop",
                "name": "å‹¾é€‰å•†å“",
                "loopType": "self",
                "locator": {
                    "strategy": "css",
                    "value": "input[type='checkbox']:not(:checked)"
                },
                "loopSelector": "input[type='checkbox']:not(:checked)",
                "maxIterations": 10,
                "startIndex": 0,
                "endIndex": 3,
                "operationType": "click",
                "operationDelay": 1000
            };
            
            resultDiv.textContent = `âœ… ç”Ÿæˆçš„å·¥ä½œæµé…ç½®:\n\n${JSON.stringify(config, null, 2)}\n\nğŸ’¡ è¿™ä¸ªé…ç½®ä¼šå‹¾é€‰å‰3ä¸ªæœªé€‰ä¸­çš„å¤é€‰æ¡†`;
        }

        // é¡µé¢åŠ è½½å®Œæˆåè‡ªåŠ¨åˆ†æ
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸ” é€‰æ‹©å™¨æµ‹è¯•å·¥å…·å·²åŠ è½½');
            console.log('ğŸ’¡ ä½¿ç”¨è¯´æ˜:');
            console.log('1. ç‚¹å‡»å¸¸ç”¨é€‰æ‹©å™¨è¿›è¡Œå¿«é€Ÿæµ‹è¯•');
            console.log('2. è¾“å…¥è‡ªå®šä¹‰é€‰æ‹©å™¨è¿›è¡Œæµ‹è¯•');
            console.log('3. ä½¿ç”¨é«˜äº®åŠŸèƒ½æŸ¥çœ‹é€‰ä¸­çš„å…ƒç´ ');
            console.log('4. åˆ†æé¡µé¢å…ƒç´ äº†è§£ç»“æ„');
            console.log('5. ç”Ÿæˆå·¥ä½œæµé…ç½®');
        });
    </script>
</body>
</html>
