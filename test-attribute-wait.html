<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>等待属性功能测试</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            max-width: 800px;
            margin: 0 auto;
        }
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .test-element {
            padding: 10px;
            margin: 10px 0;
            border: 2px solid #ccc;
            border-radius: 3px;
            background-color: #f9f9f9;
        }
        button {
            padding: 8px 16px;
            margin: 5px;
            border: none;
            border-radius: 3px;
            cursor: pointer;
            background-color: #007bff;
            color: white;
        }
        button:hover {
            background-color: #0056b3;
        }
        .status {
            margin: 10px 0;
            padding: 10px;
            border-radius: 3px;
            font-weight: bold;
        }
        .status.loading {
            background-color: #fff3cd;
            color: #856404;
        }
        .status.loaded {
            background-color: #d4edda;
            color: #155724;
        }
        .status.error {
            background-color: #f8d7da;
            color: #721c24;
        }
    </style>
</head>
<body>
    <h1>等待属性功能测试页面</h1>
    
    <div class="test-section">
        <h2>测试场景1：等待class属性包含特定值</h2>
        <div id="test1" class="test-element" data-status="initial">
            <p>这个元素的class属性会在3秒后包含"loaded"</p>
            <p>当前class: <span id="test1-class">test-element</span></p>
        </div>
        <button onclick="startTest1()">开始测试1 - 3秒后添加loaded类</button>
    </div>

    <div class="test-section">
        <h2>测试场景2：等待data-status属性等于特定值</h2>
        <div id="test2" class="test-element" data-status="loading">
            <p>这个元素的data-status属性会在5秒后变为"completed"</p>
            <p>当前data-status: <span id="test2-status">loading</span></p>
        </div>
        <button onclick="startTest2()">开始测试2 - 5秒后状态变为completed</button>
    </div>

    <div class="test-section">
        <h2>测试场景3：等待disabled属性出现</h2>
        <div id="test3" class="test-element">
            <input type="text" id="test3-input" placeholder="这个输入框会在4秒后被禁用">
            <p>当前disabled状态: <span id="test3-disabled">false</span></p>
        </div>
        <button onclick="startTest3()">开始测试3 - 4秒后禁用输入框</button>
    </div>

    <div class="test-section">
        <h2>测试场景4：等待自定义属性值变化</h2>
        <div id="test4" class="test-element" data-progress="0">
            <p>这个元素的data-progress属性会逐渐增加到100</p>
            <p>当前progress: <span id="test4-progress">0</span></p>
            <div style="width: 100%; height: 20px; background-color: #e0e0e0; border-radius: 10px;">
                <div id="progress-bar" style="width: 0%; height: 100%; background-color: #4caf50; border-radius: 10px; transition: width 0.3s;"></div>
            </div>
        </div>
        <button onclick="startTest4()">开始测试4 - 进度条到100%</button>
    </div>

    <div class="test-section">
        <h2>使用说明</h2>
        <ol>
            <li>点击上面的按钮开始相应的测试</li>
            <li>在浏览器扩展中创建智能等待步骤</li>
            <li>配置相应的元素定位器和属性条件</li>
            <li>测试等待属性功能是否正常工作</li>
        </ol>
        
        <h3>测试配置示例：</h3>
        <ul>
            <li><strong>测试1：</strong> 定位器: #test1, 属性名: class, 比较方式: 包含, 期望值: loaded</li>
            <li><strong>测试2：</strong> 定位器: #test2, 属性名: data-status, 比较方式: 等于, 期望值: completed</li>
            <li><strong>测试3：</strong> 定位器: #test3-input, 属性名: disabled, 比较方式: 等于, 期望值: (任意值，因为只要属性存在)</li>
            <li><strong>测试4：</strong> 定位器: #test4, 属性名: data-progress, 比较方式: 等于, 期望值: 100</li>
        </ul>
    </div>

    <script>
        function startTest1() {
            const element = document.getElementById('test1');
            const classSpan = document.getElementById('test1-class');
            
            setTimeout(() => {
                element.classList.add('loaded');
                classSpan.textContent = element.className;
                console.log('测试1: 已添加loaded类');
            }, 3000);
            
            console.log('测试1: 3秒后将添加loaded类');
        }

        function startTest2() {
            const element = document.getElementById('test2');
            const statusSpan = document.getElementById('test2-status');
            
            setTimeout(() => {
                element.setAttribute('data-status', 'completed');
                statusSpan.textContent = 'completed';
                console.log('测试2: data-status已变为completed');
            }, 5000);
            
            console.log('测试2: 5秒后data-status将变为completed');
        }

        function startTest3() {
            const input = document.getElementById('test3-input');
            const disabledSpan = document.getElementById('test3-disabled');
            
            setTimeout(() => {
                input.disabled = true;
                disabledSpan.textContent = 'true';
                console.log('测试3: 输入框已被禁用');
            }, 4000);
            
            console.log('测试3: 4秒后输入框将被禁用');
        }

        function startTest4() {
            const element = document.getElementById('test4');
            const progressSpan = document.getElementById('test4-progress');
            const progressBar = document.getElementById('progress-bar');
            
            let progress = 0;
            const interval = setInterval(() => {
                progress += 10;
                element.setAttribute('data-progress', progress.toString());
                progressSpan.textContent = progress.toString();
                progressBar.style.width = progress + '%';
                
                if (progress >= 100) {
                    clearInterval(interval);
                    console.log('测试4: 进度已达到100%');
                }
            }, 500);
            
            console.log('测试4: 进度条开始增长，每0.5秒增加10%');
        }

        // 页面加载完成后的初始化
        document.addEventListener('DOMContentLoaded', function() {
            console.log('等待属性功能测试页面已加载');
        });
    </script>
</body>
</html>
