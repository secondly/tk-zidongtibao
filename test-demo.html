<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>扩展功能测试页面</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            margin: 20px;
            line-height: 1.6;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .section {
            margin: 30px 0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background: #fafafa;
        }
        .section h2 {
            color: #333;
            border-bottom: 2px solid #007cba;
            padding-bottom: 10px;
        }
        .btn {
            background: #007cba;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }
        .btn:hover {
            background: #005a87;
        }
        .btn-success {
            background: #28a745;
        }
        .btn-warning {
            background: #ffc107;
            color: #212529;
        }
        .btn-danger {
            background: #dc3545;
        }
        .input-field {
            padding: 8px 12px;
            margin: 5px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 14px;
            width: 200px;
        }
        .card {
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 15px;
            margin: 10px 0;
            background: white;
        }
        .list-item {
            padding: 10px;
            margin: 5px 0;
            background: #e9ecef;
            border-radius: 3px;
            cursor: pointer;
        }
        .list-item:hover {
            background: #dee2e6;
        }
        .menu-item {
            display: inline-block;
            padding: 10px 15px;
            margin: 5px;
            background: #6c757d;
            color: white;
            text-decoration: none;
            border-radius: 3px;
        }
        .menu-item:hover {
            background: #5a6268;
            color: white;
        }
        .result-box {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
            min-height: 50px;
        }
        .form-group {
            margin: 15px 0;
        }
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        .checkbox-group {
            margin: 10px 0;
        }
        .checkbox-group label {
            display: inline-block;
            margin-right: 15px;
            font-weight: normal;
        }
        .table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        .table th, .table td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        .table th {
            background: #f8f9fa;
        }
        .table tr:nth-child(even) {
            background: #f2f2f2;
        }
        .highlight {
            background-color: yellow !important;
            border: 2px solid red !important;
        }

        /* 延迟弹窗样式 */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }
        .modal-content {
            background-color: #fefefe;
            margin: 15% auto;
            padding: 20px;
            border: none;
            border-radius: 8px;
            width: 400px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            animation: modalSlideIn 0.3s ease-out;
        }
        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(100%);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        .modal-header {
            border-bottom: 1px solid #ddd;
            padding-bottom: 10px;
            margin-bottom: 15px;
        }
        .modal-title {
            margin: 0;
            color: #333;
        }
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            line-height: 1;
        }
        .close:hover {
            color: #000;
        }
        .loading-indicator {
            display: none;
            margin-left: 10px;
            color: #007cba;
        }
        .delayed-element {
            display: none;
            background: #28a745;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🧪 浏览器扩展功能测试页面</h1>
        <p>这个页面包含了各种常见的网页元素，用于测试自动化扩展的功能。</p>

        <!-- 延迟元素测试区域 -->
        <div class="section">
            <h2>⏰ 延迟元素测试区域</h2>
            <p>测试等待元素出现的功能</p>

            <button id="showModalBtn" class="btn">动态创建弹窗 (6秒后创建)</button>
            <span class="loading-indicator" id="loadingIndicator">⏳ 弹窗创建中...</span>

            <button id="showDelayedBtn" class="btn btn-warning">动态创建按钮 (3秒后创建)</button>

            <button id="showNotificationBtn" class="btn" style="background: #17a2b8;">动态创建通知 (2秒后创建)</button>

            <div class="result-box" id="delayResult" style="display: none;">
                <strong>测试结果：</strong><span id="delayResultText"></span>
            </div>
        </div>

        <!-- 按钮测试区域 -->
        <div class="section">
            <h2>🔘 按钮测试区域</h2>
            <button id="btn1" class="btn">普通按钮</button>
            <button id="btn2" class="btn btn-success" data-action="success">成功按钮</button>
            <button id="btn3" class="btn btn-warning" onclick="showMessage('警告按钮被点击!')">警告按钮</button>
            <button id="btn4" class="btn btn-danger" data-test="danger">危险按钮</button>
            <button class="btn" style="background: purple;">紫色按钮</button>
        </div>

        <!-- 输入框测试区域 -->
        <div class="section">
            <h2>📝 输入框测试区域</h2>
            <div class="form-group">
                <label for="username">用户名:</label>
                <input type="text" id="username" class="input-field" placeholder="请输入用户名">
            </div>
            <div class="form-group">
                <label for="email">邮箱:</label>
                <input type="email" id="email" class="input-field" placeholder="请输入邮箱地址">
            </div>
            <div class="form-group">
                <label for="password">密码:</label>
                <input type="password" id="password" class="input-field" placeholder="请输入密码">
            </div>
            <div class="form-group">
                <label for="comment">评论:</label>
                <textarea id="comment" class="input-field" style="width: 300px; height: 80px;" placeholder="请输入评论内容"></textarea>
            </div>
        </div>

        <!-- 链接测试区域 -->
        <div class="section">
            <h2>🔗 链接测试区域</h2>
            <a href="#" id="link1" class="menu-item">首页链接</a>
            <a href="#" id="link2" class="menu-item" data-page="about">关于我们</a>
            <a href="#" id="link3" class="menu-item" data-pos="menu">产品介绍</a>
            <a href="#" class="menu-item show-in-app">联系我们</a>
            <a href="#" class="menu-item" title="帮助中心">帮助中心</a>
        </div>

        <!-- 列表测试区域 -->
        <div class="section">
            <h2>📋 列表测试区域</h2>
            <div class="list-item" id="item1" data-value="1">列表项目 1 - 点击我</div>
            <div class="list-item" id="item2" data-value="2">列表项目 2 - 点击我</div>
            <div class="list-item" id="item3" data-value="3" class="special-item">列表项目 3 - 特殊项目</div>
            <div class="list-item" id="item4" data-value="4">列表项目 4 - 点击我</div>
            <div class="list-item" id="item5" data-value="5">列表项目 5 - 最后一项</div>
        </div>

        <!-- 表单元素测试区域 -->
        <div class="section">
            <h2>📊 表单元素测试区域</h2>
            <div class="checkbox-group">
                <label><input type="checkbox" id="check1" value="option1"> 选项 1</label>
                <label><input type="checkbox" id="check2" value="option2"> 选项 2</label>
                <label><input type="checkbox" id="check3" value="option3"> 选项 3</label>
            </div>
            
            <div class="checkbox-group">
                <label><input type="radio" name="radio-group" value="radio1"> 单选 1</label>
                <label><input type="radio" name="radio-group" value="radio2"> 单选 2</label>
                <label><input type="radio" name="radio-group" value="radio3"> 单选 3</label>
            </div>

            <div class="form-group">
                <label for="select1">下拉选择:</label>
                <select id="select1" class="input-field">
                    <option value="">请选择</option>
                    <option value="option1">选项 1</option>
                    <option value="option2">选项 2</option>
                    <option value="option3">选项 3</option>
                </select>
            </div>
        </div>

        <!-- 表格测试区域 -->
        <div class="section">
            <h2>📊 表格测试区域</h2>
            <table class="table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>姓名</th>
                        <th>邮箱</th>
                        <th>操作</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>1</td>
                        <td>张三</td>
                        <td>zhangsan@example.com</td>
                        <td><button class="btn" onclick="editUser(1)">编辑</button></td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td>李四</td>
                        <td>lisi@example.com</td>
                        <td><button class="btn" onclick="editUser(2)">编辑</button></td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td>王五</td>
                        <td>wangwu@example.com</td>
                        <td><button class="btn" onclick="editUser(3)">编辑</button></td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- 卡片测试区域 -->
        <div class="section">
            <h2>🎴 卡片测试区域</h2>
            <div class="card" id="card1" data-type="product">
                <h3>产品卡片 1</h3>
                <p>这是一个产品介绍卡片，包含产品的基本信息。</p>
                <button class="btn">查看详情</button>
            </div>
            <div class="card" id="card2" data-type="service">
                <h3>服务卡片 2</h3>
                <p>这是一个服务介绍卡片，展示我们提供的服务。</p>
                <button class="btn btn-success">立即购买</button>
            </div>
        </div>

        <!-- 动态内容测试区域 -->
        <div class="section">
            <h2>⚡ 动态内容测试区域</h2>
            <button class="btn" onclick="addDynamicContent()">添加动态内容</button>
            <button class="btn btn-warning" onclick="clearDynamicContent()">清除动态内容</button>
            <div id="dynamic-container"></div>
        </div>

        <!-- 测试结果显示区域 -->
        <div class="section">
            <h2>📊 测试结果显示</h2>
            <div id="result-box" class="result-box">
                测试结果将显示在这里...
            </div>
            <button class="btn" onclick="clearResults()">清除结果</button>
        </div>
    </div>

    <script>
        // 为所有可点击元素添加事件监听器
        document.addEventListener('DOMContentLoaded', function() {
            // 按钮事件
            document.querySelectorAll('.btn').forEach(btn => {
                btn.addEventListener('click', function(e) {
                    if (!this.onclick) {
                        logResult(`按钮被点击: ${this.textContent} (ID: ${this.id || '无'})`);
                    }
                });
            });

            // 列表项事件
            document.querySelectorAll('.list-item').forEach(item => {
                item.addEventListener('click', function() {
                    logResult(`列表项被点击: ${this.textContent} (ID: ${this.id})`);
                });
            });

            // 链接事件
            document.querySelectorAll('a').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    logResult(`链接被点击: ${this.textContent} (ID: ${this.id || '无'})`);
                });
            });

            // 输入框事件
            document.querySelectorAll('input, textarea, select').forEach(input => {
                input.addEventListener('change', function() {
                    logResult(`表单元素值改变: ${this.id || this.name || '未知'} = ${this.value}`);
                });
            });

            // 卡片事件
            document.querySelectorAll('.card').forEach(card => {
                card.addEventListener('click', function() {
                    logResult(`卡片被点击: ${this.id} (${this.dataset.type || '未知类型'})`);
                });
            });

            // 动态创建弹窗事件
            document.getElementById('showModalBtn').addEventListener('click', function() {
                const loadingIndicator = document.getElementById('loadingIndicator');
                loadingIndicator.style.display = 'inline';
                this.disabled = true;

                logResult('开始动态创建弹窗，6秒后创建...');

                setTimeout(() => {
                    createDynamicModal();
                    loadingIndicator.style.display = 'none';
                    this.disabled = false;
                    logResult('动态弹窗已创建并显示');
                }, 3000);
            });

            // 动态创建按钮事件
            document.getElementById('showDelayedBtn').addEventListener('click', function() {
                this.disabled = true;
                this.textContent = '按钮创建中...';

                logResult('开始动态创建按钮，3秒后创建...');

                setTimeout(() => {
                    createDynamicButton();
                    this.disabled = false;
                    this.textContent = '动态创建按钮 (3秒后创建)';
                    logResult('动态按钮已创建');
                }, 3000);
            });

            // 动态创建通知事件
            document.getElementById('showNotificationBtn').addEventListener('click', function() {
                this.disabled = true;
                this.textContent = '通知创建中...';

                logResult('开始动态创建通知，2秒后创建...');

                setTimeout(() => {
                    createDynamicNotification();
                    this.disabled = false;
                    this.textContent = '动态创建通知 (2秒后创建)';
                    logResult('动态通知已创建');
                }, 2000);
            });

            logResult('页面加载完成，所有事件监听器已绑定');
        });

        function showMessage(message) {
            logResult(message);
            alert(message);
        }

        function editUser(id) {
            logResult(`编辑用户: ID = ${id}`);
        }

        function addDynamicContent() {
            const container = document.getElementById('dynamic-container');
            const timestamp = new Date().toLocaleTimeString();
            const newElement = document.createElement('div');
            newElement.className = 'card';
            newElement.innerHTML = `
                <h4>动态内容 ${timestamp}</h4>
                <p>这是在 ${timestamp} 动态添加的内容</p>
                <button class="btn" onclick="logResult('动态按钮被点击: ${timestamp}')">动态按钮</button>
            `;
            container.appendChild(newElement);
            logResult(`动态内容已添加: ${timestamp}`);
        }

        function clearDynamicContent() {
            document.getElementById('dynamic-container').innerHTML = '';
            logResult('动态内容已清除');
        }

        function clearResults() {
            document.getElementById('result-box').innerHTML = '测试结果将显示在这里...';
        }

        function logResult(message) {
            const resultBox = document.getElementById('result-box');
            const timestamp = new Date().toLocaleTimeString();
            resultBox.innerHTML += `<div>[${timestamp}] ${message}</div>`;
            resultBox.scrollTop = resultBox.scrollHeight;
            console.log(`[测试] ${message}`);
        }

        // 动态创建弹窗
        function createDynamicModal() {
            // 检查是否已存在，避免重复创建
            if (document.getElementById('dynamicModal')) {
                document.getElementById('dynamicModal').style.display = 'block';
                return;
            }

            const modal = document.createElement('div');
            modal.id = 'dynamicModal';
            modal.className = 'modal';
            modal.style.display = 'block';
            modal.innerHTML = `
                <div class="modal-content">
                    <div class="modal-header">
                        <span class="close" onclick="closeDynamicModal()">&times;</span>
                        <h3 class="modal-title">动态创建的弹窗</h3>
                    </div>
                    <div class="modal-body">
                        <p>这是一个完全动态创建的弹窗，用于测试等待元素出现的功能。</p>
                        <button id="dynamicConfirmBtn" class="btn btn-success" onclick="dynamicModalButtonClick()">确认操作</button>
                        <button class="btn" onclick="closeDynamicModal()">取消</button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        // 动态创建按钮
        function createDynamicButton() {
            // 检查是否已存在，避免重复创建
            if (document.getElementById('dynamicButton')) {
                return;
            }

            const button = document.createElement('button');
            button.id = 'dynamicButton';
            button.className = 'btn btn-success';
            button.textContent = '我是动态创建的按钮';
            button.style.margin = '10px 0';
            button.onclick = function() {
                document.getElementById('delayResult').style.display = 'block';
                document.getElementById('delayResultText').textContent = '动态按钮被成功点击！';
                logResult('动态按钮被点击');
            };

            // 插入到延迟元素测试区域
            const section = document.querySelector('.section');
            section.appendChild(button);
        }

        // 动态创建通知
        function createDynamicNotification() {
            // 检查是否已存在，避免重复创建
            if (document.getElementById('dynamicNotification')) {
                return;
            }

            const notification = document.createElement('div');
            notification.id = 'dynamicNotification';
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: #28a745;
                color: white;
                padding: 15px 20px;
                border-radius: 5px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.3);
                z-index: 1001;
                animation: slideInRight 0.3s ease-out;
            `;
            notification.innerHTML = `
                <div style="display: flex; align-items: center; justify-content: space-between;">
                    <span>动态通知已创建！</span>
                    <button id="notificationCloseBtn" style="background: none; border: none; color: white; font-size: 18px; cursor: pointer; margin-left: 15px;" onclick="closeDynamicNotification()">&times;</button>
                </div>
            `;
            document.body.appendChild(notification);
        }

        // 关闭动态弹窗
        function closeDynamicModal() {
            const modal = document.getElementById('dynamicModal');
            if (modal) {
                modal.style.display = 'none';
                logResult('动态弹窗已关闭');
            }
        }

        // 关闭动态通知
        function closeDynamicNotification() {
            const notification = document.getElementById('dynamicNotification');
            if (notification) {
                notification.remove();
                logResult('动态通知已关闭');
            }
        }

        // 动态弹窗内按钮点击
        function dynamicModalButtonClick() {
            document.getElementById('delayResult').style.display = 'block';
            document.getElementById('delayResultText').textContent = '动态弹窗内按钮被成功点击！';
            logResult('动态弹窗内按钮被点击');
            closeDynamicModal();
        }
    </script>
</body>
</html>
