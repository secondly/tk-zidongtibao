<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å·¥ä½œæµæµ‹è¯•Demo - ææŠ¥ç³»ç»Ÿæ¨¡æ‹Ÿ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #f5f5f5;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: #1890ff;
            color: white;
            padding: 20px;
            text-align: center;
        }

        .content {
            padding: 20px;
        }

        /* è¡¨æ ¼æ ·å¼ */
        .core-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }

        .core-table-body {
            background: white;
        }

        .core-table-tr {
            border-bottom: 1px solid #f0f0f0;
            transition: background-color 0.2s;
        }

        .core-table-tr:hover {
            background-color: #fafafa;
        }

        .core-table-td {
            padding: 12px 16px;
            text-align: left;
            vertical-align: middle;
        }

        .align-start {
            display: flex;
            align-items: flex-start;
            gap: 12px;
        }

        .w-full {
            flex: 1;
        }

        .text-neutral-text1 {
            color: #262626;
            font-weight: 500;
        }

        /* æŒ‰é’®æ ·å¼ */
        .pulse-button {
            background: #1890ff;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 14px;
        }

        .pulse-button:hover {
            background: #40a9ff;
            transform: translateY(-1px);
        }

        .pulse-button:active {
            transform: translateY(0);
        }

        /* æŠ½å±‰æ ·å¼ */
        .core-drawer-footer {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            padding: 16px 24px;
            border-top: 1px solid #f0f0f0;
            box-shadow: 0 -2px 8px rgba(0,0,0,0.1);
            display: none;
            z-index: 1000;
        }

        .core-drawer-footer.show {
            display: block;
        }

        .pulse-drawer-footer {
            display: flex;
            justify-content: flex-end;
        }

        .space-x-12 {
            display: flex;
            gap: 12px;
        }

        .space-x-12 button {
            padding: 8px 24px;
            border: 1px solid #d9d9d9;
            border-radius: 4px;
            background: white;
            cursor: pointer;
            transition: all 0.2s;
        }

        .space-x-12 button:nth-of-type(1) {
            background: #1890ff;
            color: white;
            border-color: #1890ff;
        }

        .space-x-12 button:nth-of-type(1):hover {
            background: #40a9ff;
        }

        /* å•†å“é€‰æ‹©å¼¹çª— */
        .slideRight-enter-done {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            display: none;
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .slideRight-enter-done.show {
            display: flex;
        }

        .product-modal {
            background: white;
            width: 80%;
            max-width: 800px;
            max-height: 80%;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
        }

        .modal-header {
            padding: 16px 24px;
            border-bottom: 1px solid #f0f0f0;
            background: #fafafa;
        }

        .modal-body {
            padding: 16px 24px;
            max-height: 400px;
            overflow-y: auto;
        }

        .core-checkbox {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .core-checkbox input {
            width: 16px;
            height: 16px;
            cursor: pointer;
        }

        .product-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .product-image {
            width: 40px;
            height: 40px;
            background: #f0f0f0;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            color: #999;
        }

        .status-indicator {
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
        }

        .status-active {
            background: #f6ffed;
            color: #52c41a;
        }

        .status-pending {
            background: #fff7e6;
            color: #fa8c16;
        }

        .status-rally {
            background: #fff2f0;
            color: #ff4d4f;
        }

        .controls {
            margin-bottom: 20px;
            padding: 16px;
            background: #fafafa;
            border-radius: 4px;
        }

        .control-group {
            display: flex;
            gap: 12px;
            align-items: center;
            margin-bottom: 8px;
        }

        .control-group label {
            min-width: 100px;
            font-weight: 500;
        }

        .control-group button {
            padding: 4px 12px;
            border: 1px solid #d9d9d9;
            border-radius: 4px;
            background: white;
            cursor: pointer;
            font-size: 12px;
        }

        .control-group button:hover {
            border-color: #1890ff;
            color: #1890ff;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ“‹ ææŠ¥ç³»ç»Ÿæµ‹è¯•Demo</h1>
            <p>æ¨¡æ‹Ÿæ‚¨çš„å·¥ä½œæµé…ç½® - åŒ…å«å¾ªç¯æ“ä½œã€æ™ºèƒ½ç­‰å¾…ã€æ•æ„Ÿè¯æ£€æµ‹ç­‰åŠŸèƒ½</p>
        </div>

        <div class="content">
            <div class="controls">
                <h3>ğŸ® æµ‹è¯•æ§åˆ¶</h3>
                <div class="control-group">
                    <label>æ·»åŠ æ•°æ®:</label>
                    <button onclick="addNormalItem()">æ·»åŠ æ­£å¸¸é¡¹ç›®</button>
                    <button onclick="addRallyItem()">æ·»åŠ Rallyé¡¹ç›®</button>
                    <button onclick="clearAll()">æ¸…ç©ºæ‰€æœ‰</button>
                </div>
                <div class="control-group">
                    <label>çŠ¶æ€æ§åˆ¶:</label>
                    <button onclick="showDrawer()">æ˜¾ç¤ºæŠ½å±‰</button>
                    <button onclick="hideDrawer()">éšè—æŠ½å±‰</button>
                    <button onclick="showProductModal()">æ˜¾ç¤ºå•†å“é€‰æ‹©</button>
                    <button onclick="hideProductModal()">éšè—å•†å“é€‰æ‹©</button>
                </div>
            </div>

            <h3>ğŸ“Š ææŠ¥åˆ—è¡¨ (è™šæ‹Ÿåˆ—è¡¨æ¨¡æ‹Ÿ)</h3>
            <table class="core-table">
                <thead>
                    <tr style="background: #fafafa;">
                        <th style="padding: 12px 16px; text-align: left;">é¡¹ç›®åç§°</th>
                        <th style="padding: 12px 16px; text-align: left;">çŠ¶æ€</th>
                        <th style="padding: 12px 16px; text-align: left;">æ“ä½œ</th>
                    </tr>
                </thead>
                <tbody class="core-table-body" id="tableBody">
                    <!-- åŠ¨æ€ç”Ÿæˆçš„è¡Œ -->
                </tbody>
            </table>
        </div>
    </div>

    <!-- æŠ½å±‰åº•éƒ¨ -->
    <div class="core-drawer-footer" id="drawerFooter">
        <div class="pulse-drawer-footer">
            <div class="space-x-12">
                <button onclick="selectProducts()">é€‰æ‹©å•†å“</button>
                <button onclick="hideDrawer()">å–æ¶ˆ</button>
            </div>
        </div>
    </div>

    <!-- å•†å“é€‰æ‹©å¼¹çª— -->
    <div class="slideRight-enter-done" id="productModal">
        <div class="product-modal">
            <div class="modal-header">
                <h3>é€‰æ‹©å•†å“</h3>
            </div>
            <div class="modal-body">
                <table class="core-table">
                    <tbody id="productTableBody">
                        <!-- åŠ¨æ€ç”Ÿæˆçš„å•†å“è¡Œ -->
                    </tbody>
                </table>
            </div>
            <div class="core-drawer-footer" style="position: relative; display: block;">
                <div class="pulse-drawer-footer">
                    <div class="space-x-12">
                        <button onclick="confirmSelection()">ç¡®è®¤é€‰æ‹©</button>
                        <button onclick="hideProductModal()">å–æ¶ˆ</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // æ¨¡æ‹Ÿæ•°æ®
        let items = [
            { id: 1, name: "æ™ºèƒ½æ‰‹æœºé¡¹ç›®", status: "active", type: "normal" },
            { id: 2, name: "ç¬”è®°æœ¬ç”µè„‘é¡¹ç›®", status: "pending", type: "normal" },
            { id: 3, name: "Rallyæ•æ·å¼€å‘", status: "rally", type: "rally" },
            { id: 4, name: "å¹³æ¿ç”µè„‘é¡¹ç›®", status: "active", type: "normal" },
            { id: 5, name: "æ™ºèƒ½æ‰‹è¡¨é¡¹ç›®", status: "pending", type: "normal" }
        ];

        let products = [
            { id: 1, name: "iPhone 15 Pro", price: "Â¥8999", category: "æ‰‹æœº" },
            { id: 2, name: "MacBook Pro", price: "Â¥12999", category: "ç”µè„‘" },
            { id: 3, name: "iPad Air", price: "Â¥4599", category: "å¹³æ¿" },
            { id: 4, name: "Apple Watch", price: "Â¥2999", category: "æ‰‹è¡¨" },
            { id: 5, name: "AirPods Pro", price: "Â¥1899", category: "è€³æœº" }
        ];

        function renderTable() {
            const tbody = document.getElementById('tableBody');
            tbody.innerHTML = '';

            items.forEach(item => {
                const row = document.createElement('tr');
                row.className = 'core-table-tr';
                
                const statusClass = item.status === 'active' ? 'status-active' : 
                                  item.status === 'pending' ? 'status-pending' : 'status-rally';
                const statusText = item.status === 'active' ? 'è¿›è¡Œä¸­' : 
                                 item.status === 'pending' ? 'å¾…å¤„ç†' : 'Rallyé¡¹ç›®';

                row.innerHTML = `
                    <td class="core-table-td">
                        <div class="align-start">
                            <div class="w-full">
                                <div class="text-neutral-text1">${item.name}</div>
                            </div>
                        </div>
                    </td>
                    <td class="core-table-td">
                        <span class="status-indicator ${statusClass}">${statusText}</span>
                    </td>
                    <td class="core-table-td">
                        <button class="pulse-button" onclick="handleItemClick(${item.id})">
                            ææŠ¥
                        </button>
                    </td>
                `;
                
                tbody.appendChild(row);
            });
        }

        function renderProducts() {
            const tbody = document.getElementById('productTableBody');
            tbody.innerHTML = '';

            products.forEach(product => {
                const row = document.createElement('tr');
                row.className = 'core-table-tr';
                
                row.innerHTML = `
                    <td class="core-table-td">
                        <div class="core-checkbox">
                            <input type="checkbox" id="product_${product.id}" value="${product.id}">
                        </div>
                    </td>
                    <td class="core-table-td">
                        <div class="product-info">
                            <div class="product-image">ğŸ“±</div>
                            <div>
                                <div class="text-neutral-text1">${product.name}</div>
                                <div style="font-size: 12px; color: #999;">${product.category}</div>
                            </div>
                        </div>
                    </td>
                    <td class="core-table-td">
                        <span style="font-weight: 500; color: #1890ff;">${product.price}</span>
                    </td>
                `;
                
                tbody.appendChild(row);
            });
        }

        function handleItemClick(itemId) {
            console.log(`ğŸ¯ ç‚¹å‡»äº†é¡¹ç›® ${itemId} çš„ææŠ¥æŒ‰é’®`);
            
            // æ¨¡æ‹Ÿæ™ºèƒ½ç­‰å¾… - æ˜¾ç¤ºæŠ½å±‰
            setTimeout(() => {
                showDrawer();
                console.log("âœ… æ™ºèƒ½ç­‰å¾…å®Œæˆ - æŠ½å±‰å·²æ˜¾ç¤º");
            }, 500);
        }

        function showDrawer() {
            document.getElementById('drawerFooter').classList.add('show');
            console.log("ğŸ“‹ æ˜¾ç¤ºæŠ½å±‰åº•éƒ¨");
        }

        function hideDrawer() {
            document.getElementById('drawerFooter').classList.remove('show');
            console.log("âŒ éšè—æŠ½å±‰åº•éƒ¨");
        }

        function selectProducts() {
            console.log("ğŸ›ï¸ ç‚¹å‡»é€‰æ‹©å•†å“æŒ‰é’®");
            
            // æ¨¡æ‹Ÿç­‰å¾…æ—¶é—´
            setTimeout(() => {
                showProductModal();
                console.log("âœ… å•†å“é€‰æ‹©å¼¹çª—å·²æ˜¾ç¤º");
            }, 200);
        }

        function showProductModal() {
            document.getElementById('productModal').classList.add('show');
            console.log("ğŸ›’ æ˜¾ç¤ºå•†å“é€‰æ‹©å¼¹çª—");
        }

        function hideProductModal() {
            document.getElementById('productModal').classList.remove('show');
            console.log("âŒ éšè—å•†å“é€‰æ‹©å¼¹çª—");
        }

        function confirmSelection() {
            const checkboxes = document.querySelectorAll('.slideRight-enter-done .core-table-tr .core-checkbox input:checked');
            console.log(`âœ… ç¡®è®¤é€‰æ‹©äº† ${checkboxes.length} ä¸ªå•†å“`);
            
            checkboxes.forEach((checkbox, index) => {
                console.log(`   - å•†å“ ${checkbox.value}`);
            });
            
            hideProductModal();
            hideDrawer();
        }

        function addNormalItem() {
            const newId = items.length + 1;
            items.push({
                id: newId,
                name: `æ–°é¡¹ç›® ${newId}`,
                status: Math.random() > 0.5 ? 'active' : 'pending',
                type: 'normal'
            });
            renderTable();
            console.log("â• æ·»åŠ äº†æ–°çš„æ­£å¸¸é¡¹ç›®");
        }

        function addRallyItem() {
            const newId = items.length + 1;
            items.push({
                id: newId,
                name: `Rallyé¡¹ç›® ${newId}`,
                status: 'rally',
                type: 'rally'
            });
            renderTable();
            console.log("â• æ·»åŠ äº†æ–°çš„Rallyé¡¹ç›®ï¼ˆæ•æ„Ÿè¯ï¼‰");
        }

        function clearAll() {
            items = [];
            renderTable();
            console.log("ğŸ—‘ï¸ æ¸…ç©ºäº†æ‰€æœ‰é¡¹ç›®");
        }

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            renderTable();
            renderProducts();
            console.log("ğŸš€ Demoé¡µé¢åˆå§‹åŒ–å®Œæˆ");
            console.log("ğŸ’¡ æç¤ºï¼šè¿™ä¸ªé¡µé¢æ¨¡æ‹Ÿäº†æ‚¨çš„å·¥ä½œæµé…ç½®ä¸­çš„æ‰€æœ‰å…ƒç´ ");
            console.log("ğŸ“ æ‚¨å¯ä»¥åœ¨å·¥ä½œæµè®¾è®¡å™¨ä¸­ä½¿ç”¨è¿™äº›é€‰æ‹©å™¨è¿›è¡Œæµ‹è¯•ï¼š");
            console.log("   - ææŠ¥æŒ‰é’®: .core-table .core-table-body .core-table-tr .core-table-td .pulse-button");
            console.log("   - é€‰æ‹©å•†å“æŒ‰é’®: .core-drawer-footer .pulse-drawer-footer .space-x-12 button:nth-of-type(1)");
            console.log("   - å•†å“å¤é€‰æ¡†: .slideRight-enter-done .core-table-tr .core-checkbox input");
            console.log("   - æ•æ„Ÿè¯æ£€æµ‹: .text-neutral-text1 (åŒ…å«'rally'çš„é¡¹ç›®)");
        });

        // æ¨¡æ‹Ÿè™šæ‹Ÿåˆ—è¡¨æ»šåŠ¨
        let scrollCount = 0;
        function simulateVirtualListScroll() {
            scrollCount++;
            console.log(`ğŸ“œ æ¨¡æ‹Ÿè™šæ‹Ÿåˆ—è¡¨æ»šåŠ¨ ${scrollCount} æ¬¡`);
            
            // æ·»åŠ æ›´å¤šé¡¹ç›®æ¨¡æ‹Ÿæ»šåŠ¨åŠ è½½
            if (scrollCount <= 3) {
                for (let i = 0; i < 2; i++) {
                    addNormalItem();
                }
            }
        }

        // æ¯5ç§’æ¨¡æ‹Ÿä¸€æ¬¡æ»šåŠ¨
        setInterval(simulateVirtualListScroll, 5000);
    </script>
</body>
</html>
